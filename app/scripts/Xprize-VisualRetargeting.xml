<!-- Copyright (C) 2021 Fondazione Istituto Italiano di Tecnologia (IIT) -->
<!-- All Rights Reserved. -->
<!-- Author: Kourosh Darvish <Kourosh.Darvish@iit.it> -->

<application>

  <name>Xprize-VisualRetargeting</name>
  <description>Application to run module related to vision for retargeting.</description>
  <version>1.0</version>
  <authors>
    <author email="kourosh.darvish@iit.it">Kourosh Darvish</author>
  </authors>

  <!-- Modules -->
  <module>
    <name>yarpdev</name>
    <parameters> --from camera/ServerGrabberDualDragon.ini --split false</parameters>
    <node>icub-head</node>
  </module>

  <module>
    <name>yarpdev</name>
    <parameters>--from openXRHeadsetParameters.ini</parameters>
    <node>icub-virtualizer</node>
  </module>

  <module>
    <name>yarpdev</name>
    <parameters>--from sensors/RealSense_conf.ini</parameters>
    <node>icub-head</node>
  </module>

  <module>
     <name>idyntree-yarp-visualizer</name>
     <parameters>--OUTPUT_STREAM::useRGBA true</parameters>
     <node>icub-console-gui</node>
  </module>

  <!-- Connections -->
  <connection>
    <from>/icub/cam</from>
    <to>/joypadDevice/Oculus/display:i</to>
    <protocol>mjpeg</protocol>
  </connection>

  <connection>
    <from>/idyntree-yarp-visualizer/image</from>
    <to>/joypadDevice/Oculus/gui_0</to>
    <protocol>fast_tcp</protocol>
  </connection>

  <connection>
    <from>/depthCamera/rgbImage:o</from>
    <to>/joypadDevice/Oculus/gui_1</to>
    <protocol>mjpeg</protocol>
  </connection>

</application>
